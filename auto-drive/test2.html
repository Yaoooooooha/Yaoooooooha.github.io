<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AR.js with Three.js Photo Capture</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/jeromeetienne/ar.js/master/aframe/build/aframe-ar.js"></script>
  </head>
  <body>
    <a-scene embedded arjs="sourceType: webcam;">
      <!-- 3D model -->
      <a-box position="0 0.5 0" material="color: red;"></a-box>
      <!-- Camera and light -->
      <a-entity camera></a-entity>
      <a-light type="ambient" color="#FFFFFF"></a-light>
      <a-light type="point" intensity="2" position="2 4 4"></a-light>
      <!-- Photo capture button -->
      <a-plane
        position="2 2 -3"
        rotation="0 0 0"
        width="5"
        height="5"
        color="blue"
        clickable="onClick: capturePhoto"
      ></a-plane>
    </a-scene>

    <script>
      // Function to capture photo
      function capturePhoto() {
        // Get canvas element from AR.js
        var canvas = document.querySelector("canvas.a-canvas");

        // Convert canvas to image data
        var imgData = canvas.toDataURL("image/png");

        // Create a link element to download the image
        var link = document.createElement("a");
        link.href = imgData;
        link.download = "ar_photo.png";
        document.body.appendChild(link);

        // Trigger the click event of the link to download the image
        link.click();

        // Remove the link element
        document.body.removeChild(link);
      }
    </script>
  </body>
</html>
